---
description: "改修時のテスト・メンテナンス手順（Agent-Requested）"
alwaysApply: true
---
# 改修時チェック
- 差分駆動：変更設計→**影響領域を列挙**（関数/API/画面/スキーマ）→該当テストを追加/更新。
- “意図的変更”と“回帰”を区別し、**期待値変更の理由**をPR本文に明記。
- 契約・型は**先に更新**し、Consumer/Provider/スキーマ検証を通す。
- テストデータは**Factory/Seedの単一点**を更新し重複定義を排除。時刻/タイムゾーンは専用ケースで保持。
- スナップショット更新は**見た目/文言のみ**許容。意味的差（役割/構造/アクセシビリティ）はテストを書き換え。
- モックは**最新の契約**に同期（勝手拡張/省略をしない）。
- 並列E2Eはユーザー/データの**名前空間化**とDBリセットを自動化。
- クリティカル経路の**軽量ベンチ**を維持し、改修ごとの差分を可視化（閾値逸脱でFail）。
- ドキュメント（README/テスト戦略/契約）を**PR定型**として更新。
