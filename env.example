# Backend settings
ENVIRONMENT=development
STRICT_MODE=true

# Google OAuth
# 例: 12345-abcdefgh.apps.googleusercontent.com（Google Cloud Console で発行した Web クライアント ID）
GOOGLE_CLIENT_ID=
# Optional: Restrict sign-in to Google Workspace domain (example.com)
# GOOGLE_ALLOWED_HD=
# Optional in development: Restrict sign-in to specific email addresses (comma separated).
# ENVIRONMENT=production では必須となるため、デプロイ前に本番の許可リストへ置き換えてください。
# ADMIN_EMAIL_ALLOWLIST=admin@example.com,owner@example.com
# Optional: Allow small clock skew when verifying Google ID tokens (seconds)
# GOOGLE_CLOCK_SKEW_SECONDS=60

# Session cookie (set strong secrets in production)
# Use a cryptographically strong random string with >=32 characters
# Example: `openssl rand -base64 48 | tr -d '\n'` and paste the output below.
SESSION_SECRET_KEY=
SESSION_COOKIE_NAME=wp_session
# Firebase Hosting rewrite 経由でも認証できるよう、バックエンド側で `__session` も自動的に同じ値へミラーします。
# SESSION_COOKIE_SECURE=true
# SESSION_MAX_AGE_SECONDS=1209600
# ゲスト閲覧モードのセッション Cookie（署名付き）。必要に応じて Cookie 名と寿命を調整します。
GUEST_SESSION_COOKIE_NAME=wp_guest
# GUEST_SESSION_MAX_AGE_SECONDS=86400

# LLM providers: openai | local
LLM_PROVIDER=openai
LLM_MODEL=gpt-4o-mini
LLM_TIMEOUT_MS=45000
LLM_MAX_RETRIES=1
# WordPack は複数セクションのJSONを返すため、途中切れ防止に十分な値を推奨
# 生成が途中で途切れて「例文が空」になる場合は 1200–1800 に増やしてください
LLM_MAX_TOKENS=1500

# Embeddings
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-small

# OpenAI
OPENAI_API_KEY=



# Chroma (optional local persistence directory)
CHROMA_PERSIST_DIR=.chroma
# CHROMA_SERVER_URL=

# Auto seed on startup
AUTO_SEED_ON_STARTUP=true
# Optional JSONL paths (uncomment to seed from files)
# AUTO_SEED_WORD_JSONL=path/to/word_snippets.jsonl
# AUTO_SEED_TERMS_JSONL=path/to/domain_terms.jsonl

# Firestore (all environments use Firestore; local/CI はエミュレータ推奨)
FIRESTORE_PROJECT_ID=wordpack-local
# 最初にエミュレータへの接続を試み、未設定のときだけ Cloud Firestore へ接続します。
# ローカル/CI は必ずエミュレータを併走させてください（開発モードでも Cloud へは行きません）。
# Docker Compose を使うときは service 名解決を利用して以下を設定してください:
#   FIRESTORE_EMULATOR_HOST=firestore-emulator:8080
# ホストで直接 `make firestore-emulator` を叩く場合は 127.0.0.1 を指定してください:
#   FIRESTORE_EMULATOR_HOST=127.0.0.1:8080
# デフォルトでは未設定にしておき、利用形態に応じて上記のいずれかを選択してください。
# FIRESTORE_EMULATOR_PORT=8080  # scripts/start_firestore_emulator.sh や CI でのポート指定用補助変数

# Operations/Observability (PR4)
# Cloud Logging/Trace correlation for Cloud Run
# GCP_PROJECT_ID=
# Per-IP / Per-User API rate limits (requests per minute)
RATE_LIMIT_PER_MIN_IP=240
RATE_LIMIT_PER_MIN_USER=240
# Proxy headers / Host 保護
# Google Cloud Load Balancer 経由の場合は 35.191.0.0/16,130.211.0.0/22 を推奨
# TRUSTED_PROXY_IPS=35.191.0.0/16,130.211.0.0/22
# カスタムドメインと Cloud Run 既定ホスト (app-xxxx.a.run.app) を列挙
# ALLOWED_HOSTS=app-1234567890-uc.a.run.app,api.example.com
# Security headers
# HSTS の max-age（秒）。HTTPS 運用では 1年以上 (63072000) を推奨。
SECURITY_HSTS_MAX_AGE_SECONDS=63072000
# includeSubDomains や preload を付与したくない場合は false に切り替え。
# SECURITY_HSTS_INCLUDE_SUBDOMAINS=true
# SECURITY_HSTS_PRELOAD=false
# Content-Security-Policy の default-src / connect-src をカンマ区切りで指定。
# 例: "'self',https://cdn.example.com"（引用符を含めて記述）
# SECURITY_CSP_DEFAULT_SRC='self'
# SECURITY_CSP_CONNECT_SRC='self'
# Optional: Enable Sentry by setting DSN
# SENTRY_DSN=

# CORS
# 許可するオリジンをカンマ区切りで指定（例: https://app.example.com,https://admin.example.com）
# 未設定の場合はワイルドカード（資格情報非許可）が適用されます
# CORS_ALLOWED_ORIGINS=

# Langfuse (optional)
# Enable and configure to send traces/metrics to Langfuse
LANGFUSE_ENABLED=false
# LANGFUSE_PUBLIC_KEY=
# LANGFUSE_SECRET_KEY=
# LANGFUSE_HOST=https://cloud.langfuse.com
# LANGFUSE_RELEASE=wordpack-api@0.3.0
# If you need to debug prompt issues, enable full prompt logging to Langfuse
# CAUTION: This may include sensitive content. Keep disabled in production unless required.
# LANGFUSE_LOG_FULL_PROMPT=false
# LANGFUSE_PROMPT_MAX_CHARS=40000
